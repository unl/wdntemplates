(function(d){var h=function(a){return a},i=function(a){if(typeof a!="string")return parseFloat(a);var b=a.indexOf("."),c=a.indexOf(",");if(b!=-1&&c!=-1)a=c>b?a.replace(".","").replace(",","."):a.replace(",","");else if(c!=-1)a=a.replace(",",".");return parseFloat(a)};d.all=function(a,b){var c=true;if(a){b=b||h;d.each(a,function(e,f){return c=c&&b(f,e)})}return c};d.any=function(a,b){var c=false;if(a){b=b||h;d.each(a,function(e,f){c=b(f,e);return!c})}return c};Validator=function(a,b,c,e){if(typeof c==
"function"){this.options=e;this._test=c}else{this.options=c;this._test=function(){return true}}this.error=b||"Validation failed."};Validator.prototype={test:function(a,b){var c=this._test(a,b);if(c)c=d.all(this.options,function(e,f){if(Validator.methods[f])return Validator.methods[f](a,b,e);return true});return c}};Validator.methods={pattern:function(a,b,c){return c.test(a)},minLength:function(a,b,c){return a.length>=c},maxLength:function(a,b,c){return a.length<=c},min:function(a,b,c){return a>=parseFloat(c)},
max:function(a,b,c){return a<=parseFloat(c)},notOneOf:function(a,b,c){return d.all(c,function(e){return a!=e})},oneOf:function(a,b,c){return d.any(c,function(e){return a==e})},is:function(a,b,c){return a==c},isNot:function(a,b,c){return a!=c},equalToField:function(a,b,c){return a==d(c).val()},notEqualToField:function(a,b,c){return a!=d(c).val()},include:function(a,b,c){return d.all(c,function(e){if(Validation.methods[e])return Validation.methods[e].test(a,b);return true})}};Validation=function(a,
b){if(this.form=a){this.options=b;this.options.onSubmit&&this.form.submit(d.proxy(this.onSubmit,this));if(this.options.immediate){var c=this;d(":input",this.form).each(function(){d(this).is(":radio, :checkbox")?d(this).click(d.proxy(c.onChange,c)):d(this).change(d.proxy(c.onChange,c))})}}};Validation.prototype={onChange:function(a){Validation.isOnChange=true;a=a.target;this.resetElement(a);this.validateField(a);Validation.isOnChange=false},onSubmit:function(){if(!this.validate())return false},validate:function(){var a=
false,b=[],c=this;d(".validation-advice li",this.form).hide();try{d(":input",this.form).each(function(){var f=c.validateField(this);b.push(f);if(c.options.stopOnFirst&&!f)return f})}catch(e){b.push(false);WDN.log(e)}a=d.all(b);!a&&this.options.focusOnError&&d(":input:visible.validation-failed",this.form).first().focus();this.form.triggerHandler("validate-form",[a]);return a},validateField:function(a){a=d(a);var b=this,c=a.attr("class"),e=[];if(c)e=c.split(" ");return d.all(e,function(f){if((f=d.trim(f))&&
Validation.methods[f]){f=b.validateTest(f,a);a.triggerHandler("validate-element",[f]);return f}return true})},validateTest:function(a,b){var c=Validation.methods[a];if(b.is(":visible")&&!c.test(b.val(),b)){Validation.showAdvice(a,b,this.options);b.triggerHandler("validate-update",["failed"]);return false}else{b.triggerHandler("validate-update",["passed"]);b.removeClass("validation-failed").addClass("validation-passed");if(this.options.addClassNameToContainer){a=Validation.getContainer(b,this.options);
if(!d(".validation-failed",a).length){d.trim(b.val())||!b.is(":visible")?a.addClass("validation-passed"):a.removeClass("validation-passed");a.removeClass("validation-error")}}return true}},reset:function(){var a=this;d(":input",this.form).each(function(){a.resetElement(this)})},resetElement:function(a){a=d(a);var b=Validation.getAdviceContainer(a,this.options);d(".validation-advice li",b).hide();a.removeClass("validation-failed");a.removeClass("validation-passed");if(this.options.addClassNameToContainer){Validation.getContainer(a,
this.options);containter.removeClass("validation-passed").removeClass("validation-error")}}};Validation.methods={IsEmpty:new Validator("IsEmpty","",function(a){return d.trim(a)==""}),"required-entry":new Validator("required-entry","This is a required field.",function(a){return!Validation.methods.IsEmpty.test(a)}),"validate-number":new Validator("validate-number","Please enter a valid number in this field.",function(a){return Validation.methods.IsEmpty.test(a)||!isNaN(i(a))}),"validate-digits":new Validator("validate-digits",
"Please use numbers only in this field. please avoid spaces or other characters such as dots or commas.",function(a){return Validation.methods.IsEmpty.test(a)||!/[^\d]/.test(a)}),"validate-alpha":new Validator("validate-alpha","Please use letters only (a-z or A-Z) in this field.",function(a){return Validation.methods.IsEmpty.test(a)||/^[a-zA-Z]+$/.test(a)}),"validate-code":new Validator("validate-code","Please use only letters (a-z), numbers (0-9) or underscore(_) in this field, first character should be a letter.",
function(a){return Validation.methods.IsEmpty.test(a)||/^[a-z]+[a-z0-9_]+$/.test(a)}),"validate-alphanum":new Validator("validate-alphanum","Please use only letters (a-z or A-Z) or numbers (0-9) only in this field. No spaces or other characters are allowed.",function(a){return Validation.methods.IsEmpty.test(a)||/^[a-zA-Z0-9]+$/.test(a)}),"validate-phoneStrict":new Validator("validate-phoneStrict","Please enter a valid phone number. For example (123) 456-7890 or 123-456-7890.",function(a){return Validation.methods.IsEmpty.test(a)||
/^(\()?\d{3}(\))?(-|\s)?\d{3}(-|\s)\d{4}$/.test(a)}),"validate-phoneLax":new Validator("validate-phoneLax","Please enter a valid phone number. For example (123) 456-7890 or 123-456-7890.",function(a){return Validation.methods.IsEmpty.test(a)||/^((\d[-. ]?)?((\(\d{3}\))|\d{3}))?[-. ]?\d{3}[-. ]?\d{4}$/.test(a)}),"validate-date":new Validator("validate-date","Please enter a valid date.",function(a){var b=new Date(a);return Validation.methods.IsEmpty.test(a)||!isNaN(b)}),"validate-email":new Validator("validate-email",
"Please enter a valid email address. For example johndoe@domain.com",function(a){return Validation.methods.IsEmpty.test(a)||/^[a-z0-9,!\#\$%&'\*\+\/=\?\^_`\{\|\}~-]+(\.[a-z0-9,!\#\$%&'\*\+\/=\?\^_`\{\|\}~-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*\.([a-z]{2,})/i.test(a)}),"validate-url":new Validator("validate-url","Please enter a valid URL. http:// is required",function(a){return Validation.methods.IsEmpty.test(a)||/^(http|https|ftp):\/\/(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+)(:(\d+))?\/?/i.test(a)}),
"validate-zip":new Validator("validate-zip","Please enter a valid zip code. For example 90602 or 90602-1234.",function(a){return Validation.methods.IsEmpty.test(a)||/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(a)}),"validate-currency-dollar":new Validator("validate-currency-dollar","Please enter a valid $ amount. For example $100.00.",function(a){return Validation.methods.IsEmpty.test(a)||/^\$?\-?([1-9]{1}[0-9]{0,2}(\,[0-9]{3})*(\.[0-9]{0,2})?|[1-9]{1}\d*(\.[0-9]{0,2})?|0(\.[0-9]{0,2})?|(\.[0-9]{1,2})?)$/.test(a)}),
"validate-one-required":new Validator("validate-one-required","Please select one of the above options.",function(a,b){a=b.parent();a=d(":input",a);return d.any(a,function(c){return d(c).val()})}),"validate-one-required-by-name":new Validator("validate-one-required-by-name","Please select one of the options.",function(a,b){a=b.attr("name").replace(/([\\"])/g,"\\$1");return d("input[name="+a+"]:checked").length>0}),"validate-unsigned-number":new Validator("validate-unsigned-number","Please enter a valid number in this field.",
function(a){a=i(a);return!isNaN(a)&&a>=0}),"validate-greater-than-zero":new Validator("validate-greater-than-zero","Please enter a number greater than 0 in this field.",function(a){if(a.length)return parseFloat(a)>0;return true}),"validate-zero-or-greater":new Validator("validate-zero-or-greater","Please enter a number 0 or greater in this field.",function(a){if(a.length)return parseFloat(a)>=0;return true}),"validate-percents":new Validator("validate-percents","Please enter a number lower than 100",
{min:0,max:100})};Validation.getContainer=function(a,b){var c;if(b.containerClassName){b=a.parents("."+b.containerClassName);if(b.length)c=b.first()}c||(c=a.parent());return c};Validation.getAdviceContainer=function(a,b){var c=a.closest(".advice-container");c.length||(c=Validation.getContainer(a,b));return c};Validation.showAdvice=function(a,b,c){var e=Validation.getContainer(b,c);c.addClassNameToContainer&&e.removeClass("validation-passed").addClass("validation-error");var f=b.closest(".advice-container");
if(f.length){f.removeClass("validation-passed").addClass("validation-failed");e=f}else b.removeClass("validation-passed").addClass("validation-failed");f=e.children(".validation-advice");if(!f.length){f=d('<ul class="validation-advice" />');e.append(f)}e=d("li.advice-"+a,f);if(!e.length){e=d('<li class="advice-'+a+'" />').hide();a=Validation.methods[a];var g;if(c.useTitles&&b.attr("title"))g=b.attr("title");if(!g)g=a.error;e.text(g).appendTo(f)}e.show()};d.fn.validation=function(a){var b=d.extend({},
d.fn.validation.defaults,a);this.each(function(){d(this).data("validation")||d(this).data("validation",new Validation(d(this),b))});return this};d.fn.validation.defaults={onSubmit:true,stopOnFirst:false,immediate:false,focusOnError:true,useTitles:false,addClassNameToContainer:false,containerClassName:"input-box"};d.validation={addMethod:function(a,b,c,e){Validation.methods[a]=new Validator(a,b,c,e)}}})(WDN.jQuery);
